/*!
 * Pikaday
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
(function(a,b){"use strict";var d;if(typeof exports==="object"){try{d=require("moment")}catch(c){}module.exports=b(d)}else{if(typeof define==="function"&&define.amd){define(function(f){var h="moment";try{d=f(h)}catch(g){}return b(d)})}else{a.Pikaday=b(a.moment)}}}(this,function(z){"use strict";var i=typeof z==="function",d=!!window.addEventListener,o=window.document,s=window.setTimeout,q=function(E,F,G,D){if(d){E.addEventListener(F,G,!!D)}else{E.attachEvent("on"+F,G)}},u=function(E,F,G,D){if(d){E.removeEventListener(F,G,!!D)}else{E.detachEvent("on"+F,G)}},C=function(E,D,G){var F;if(o.createEvent){F=o.createEvent("HTMLEvents");F.initEvent(D,true,false);F=w(F,G);E.dispatchEvent(F)}else{if(o.createEventObject){F=o.createEventObject();F=w(F,G);E.fireEvent("on"+D,F)}}},v=function(D){return D.trim?D.trim():D.replace(/^\s+|\s+$/g,"")},a=function(D,E){return(" "+D.className+" ").indexOf(" "+E+" ")!==-1},k=function(D,E){if(!a(D,E)){D.className=(D.className==="")?E:D.className+" "+E}},l=function(D,E){D.className=v((" "+D.className+" ").replace(" "+E+" "," "))},j=function(D){return(/Array/).test(Object.prototype.toString.call(D))},A=function(D){return(/Date/).test(Object.prototype.toString.call(D))&&!isNaN(D.getTime())},n=function(E){var D=E.getDay();return D===0||D===6},g=function(D){return D%4===0&&D%100!==0||D%400===0},c=function(D,E){return[31,g(D)?29:28,31,30,31,30,31,31,30,31,30,31][E]},y=function(D){if(A(D)){D.setHours(0,0,0,0)}},p=function(E,D){return E.getTime()===D.getTime()},w=function(H,G,D){var F,E;for(F in G){E=H[F]!==undefined;if(E&&typeof G[F]==="object"&&G[F]!==null&&G[F].nodeName===undefined){if(A(G[F])){if(D){H[F]=new Date(G[F].getTime())}}else{if(j(G[F])){if(D){H[F]=G[F].slice(0)}}else{H[F]=w({},G[F],D)}}}else{if(D||!E){H[F]=G[F]}}}return H},h=function(D){if(D.month<0){D.year-=Math.ceil(Math.abs(D.month)/12);D.month+=12}if(D.month>11){D.year+=Math.floor(Math.abs(D.month)/12);D.month-=12}return D},defaults={field:null,bound:undefined,position:"bottom left",reposition:true,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:false,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:false,yearSuffix:"",showMonthAfterYear:false,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},B=function(F,D,E){D+=F.firstDay;while(D>=7){D-=7}return E?F.i18n.weekdaysShort[D]:F.i18n.weekdays[D]},t=function(J,E,K,G,H,F,I){if(I){return'<td class="is-empty"></td>'}var D=[];if(F){D.push("is-disabled")}if(H){D.push("is-today")}if(G){D.push("is-selected")}return'<td data-day="'+J+'" class="'+D.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+K+'" data-pika-month="'+E+'" data-pika-day="'+J+'">'+J+"</button></td>"},f=function(G,D,H){var F=new Date(H,0,1),E=Math.ceil((((new Date(H,D,G)-F)/86400000)+F.getDay()+1)/7);return'<td class="pika-week">'+E+"</td>"},e=function(E,D){return"<tr>"+(D?E.reverse():E).join("")+"</tr>"},b=function(D){return"<tbody>"+D.join("")+"</tbody>"},x=function(F){var E,D=[];if(F.showWeekNumber){D.push("<th></th>")}for(E=0;E<7;E++){D.push('<th scope="col"><abbr title="'+B(F,E)+'">'+B(F,E,true)+"</abbr></th>")}return"<thead>"+(F.isRTL?D.reverse():D).join("")+"</thead>"},r=function(R,O,P,N,T){var J,H,M,I,D=R._o,G=P===D.minYear,S=P===D.maxYear,L='<div class="pika-title">',F,Q,E=true,K=true;for(M=[],J=0;J<12;J++){M.push('<option value="'+(P===T?J-O:12+J-O)+'"'+(J===N?" selected":"")+((G&&J<D.minMonth)||(S&&J>D.maxMonth)?"disabled":"")+">"+D.i18n.months[J]+"</option>")}F='<div class="pika-label"><select class="pika-select pika-select-month">'+M.join("")+"</select></div>";if(j(D.yearRange)){J=D.yearRange[0];H=D.yearRange[1]+1}else{J=P-D.yearRange;H=1+P+D.yearRange}for(M=[];J<H&&J<=D.maxYear;J++){if(J>=D.minYear){M.push('<option value="'+J+'"'+(J===P?" selected":"")+">"+(J)+"</option>")}}Q='<div class="pika-label"><select class="pika-select pika-select-year">'+M.join("")+"</select></div>";if(D.showMonthAfterYear){L+=Q+F}else{L+=F+Q}if(G&&(N===0||D.minMonth>=N)){E=false}if(S&&(N===11||D.maxMonth<=N)){K=false}if(O===0){I=D.i18n.previousMonth;L+='<button class="pika-prev'+(E?"":" is-disabled")+'" type="button" title="'+I+'">'+I+"</button>"}if(O===(R._o.numberOfMonths-1)){I=D.i18n.nextMonth;L+='<button class="pika-next'+(K?"":" is-disabled")+'" type="button" title="'+I+'">'+I+"</button>"}return L+="</div>"},m=function(D,E){return'<table class="pika-table">'+x(D)+b(E)+"</table>"},Pikaday=function(F){var D=this,G=D.config(F);D._onMouseDown=function(I){if(!D._v){return}I=I||window.event;var H=I.target||I.srcElement;if(!H){return}if(!a(H,"is-disabled")){if(a(H,"pika-button")&&!a(H,"is-empty")){D.setDate(new Date(H.getAttribute("data-pika-year"),H.getAttribute("data-pika-month"),H.getAttribute("data-pika-day")),false);if(G.bound){s(function(){D.hide();if(G.field){G.field.blur()}},100)}return}else{if(a(H,"pika-prev")){D.prevMonth()}else{if(a(H,"pika-next")){D.nextMonth()}}}}if(!a(H,"pika-select")){if(I.preventDefault){I.preventDefault()}else{I.returnValue=false;return false}}else{D._c=true}};D._onChange=function(I){I=I||window.event;var H=I.target||I.srcElement;if(!H){return}if(a(H,"pika-select-month")){D.gotoMonth(H.value)}else{if(a(H,"pika-select-year")){D.gotoYear(H.value)}}};D._onInputChange=function(I){var H;if(I.firedBy===D){return}if(i){H=z(G.field.value,G.format);H=(H&&H.isValid())?H.toDate():null}else{H=new Date(Date.parse(G.field.value))}D.setDate(A(H)?H:null);if(!D._v){D.show()}};D._onInputFocus=function(){D.show()};D._onInputClick=function(){D.show()};D._onInputBlur=function(){var H=o.activeElement;do{if(a(H,"pika-single")){return}}while((H=H.parentNode));if(!D._c){D._b=s(function(){D.hide()},50)}D._c=false};D._onClick=function(I){I=I||window.event;var H=I.target||I.srcElement,J=H;if(!H){return}if(!d&&a(H,"pika-select")){if(!H.onchange){H.setAttribute("onchange","return;");q(H,"change",D._onChange)}}do{if(a(J,"pika-single")||J===G.trigger){return}}while((J=J.parentNode));if(D._v&&H!==G.trigger&&J!==G.trigger){D.hide()}};D.el=o.createElement("div");D.el.className="pika-single"+(G.isRTL?" is-rtl":"");q(D.el,"mousedown",D._onMouseDown,true);q(D.el,"change",D._onChange);if(G.field){if(G.container){G.container.appendChild(D.el)}else{if(G.bound){o.body.appendChild(D.el)}else{G.field.parentNode.insertBefore(D.el,G.field.nextSibling)}}q(G.field,"change",D._onInputChange);if(!G.defaultDate){if(i&&G.field.value){G.defaultDate=z(G.field.value,G.format).toDate()}else{G.defaultDate=new Date(Date.parse(G.field.value))}G.setDefaultDate=true}}var E=G.defaultDate;if(A(E)){if(G.setDefaultDate){D.setDate(E,true)}else{D.gotoDate(E)}}else{D.gotoDate(new Date())}if(G.bound){this.hide();D.el.className+=" is-bound";q(G.trigger,"click",D._onInputClick);q(G.trigger,"focus",D._onInputFocus);q(G.trigger,"blur",D._onInputBlur)}else{this.show()}};Pikaday.prototype={config:function(E){if(!this._o){this._o=w({},defaults,true)}var F=w(this._o,E,true);F.isRTL=!!F.isRTL;F.field=(F.field&&F.field.nodeName)?F.field:null;F.bound=!!(F.bound!==undefined?F.field&&F.bound:F.field);F.trigger=(F.trigger&&F.trigger.nodeName)?F.trigger:F.field;F.disableWeekends=!!F.disableWeekends;F.disableDayFn=(typeof F.disableDayFn)=="function"?F.disableDayFn:null;var D=parseInt(F.numberOfMonths,10)||1;F.numberOfMonths=D>4?4:D;if(!A(F.minDate)){F.minDate=false}if(!A(F.maxDate)){F.maxDate=false}if((F.minDate&&F.maxDate)&&F.maxDate<F.minDate){F.maxDate=F.minDate=false}if(F.minDate){y(F.minDate);F.minYear=F.minDate.getFullYear();F.minMonth=F.minDate.getMonth()}if(F.maxDate){y(F.maxDate);F.maxYear=F.maxDate.getFullYear();F.maxMonth=F.maxDate.getMonth()}if(j(F.yearRange)){var G=new Date().getFullYear()-10;F.yearRange[0]=parseInt(F.yearRange[0],10)||G;F.yearRange[1]=parseInt(F.yearRange[1],10)||G}else{F.yearRange=Math.abs(parseInt(F.yearRange,10))||defaults.yearRange;if(F.yearRange>100){F.yearRange=100}}return F},toString:function(D){if(i){return z(this._d).format(D||this._o.format)}if(A(this._d)){return this._d.toDateString()}return""},getMoment:function(){return i?z(this._d):null},setMoment:function(D,E){if(i&&z.isMoment(D)){this.setDate(D.toDate(),E)}},getDate:function(){return A(this._d)?new Date(this._d.getTime()):null},setDate:function(F,K){if(!F){this._d=null;if(this._o.field){this._o.field.value="";C(this._o.field,"change",{firedBy:this})}this.draw();return}if(typeof F==="string"){F=new Date(Date.parse(F))}if(!A(F)){return}var I=this._o.minDate,L=this._o.maxDate;if(A(I)&&F<I){F=I}else{if(A(L)&&F>L){F=L}}var D=F.getTime(),G=new Date(D);y(G);this.gotoDate(G);if(this._o.format.match(/((H *:)|(: *[MS]))/i)){var J=this._o.trigger.value;if(i){var M=z(J);if(M.isValid()){var E=M.get("hour")*3600+M.get("minute")*60;G.setTime(G.getTime()+E*1000)}}else{var H=J.match(/([01]?\d|2[0-3]) *: *([0-5]?\d) *$/);if(H){var E=parseInt(H[1],10)*3600+parseInt(H[2],10)*60;G.setTime(G.getTime()+E*1000)}}}this._d=G;switch(this._o.trigger.tagName){case"INPUT":switch(this._o.trigger.type){case"text":case"radio":this._o.trigger.value=this.toString();break}break;case"TEXTAREA":case"SELECT":this._o.trigger.value=this.toString();break}C(this._o.field,"change",{firedBy:this});if(!K&&typeof this._o.onSelect==="function"){this._o.onSelect.call(this,this.getDate())}},gotoDate:function(F){var E=true;if(!A(F)){return}if(this.calendars){var H=new Date(this.calendars[0].year,this.calendars[0].month,1),D=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),G=F.getTime();D.setMonth(D.getMonth()+1);D.setDate(D.getDate()-1);E=(G<H.getTime()||D.getTime()<G)}if(E){this.calendars=[{month:F.getMonth(),year:F.getFullYear()}];if(this._o.mainCalendar==="right"){this.calendars[0].month+=1-this._o.numberOfMonths}}this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=h(this.calendars[0]);for(var D=1;D<this._o.numberOfMonths;D++){this.calendars[D]=h({month:this.calendars[0].month+D,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date())},gotoMonth:function(D){if(!isNaN(D)){this.calendars[0].month=parseInt(D,10);this.adjustCalendars()}},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(D){if(!isNaN(D)){this.calendars[0].year=parseInt(D,10);this.adjustCalendars()}},setMinDate:function(D){this._o.minDate=D},setMaxDate:function(D){this._o.maxDate=D},draw:function(E){if(!this._v&&!E){return}var D=this._o,K=D.minYear,H=D.maxYear,I=D.minMonth,F=D.maxMonth,G="";if(this._y<=K){this._y=K;if(!isNaN(I)&&this._m<I){this._m=I}}if(this._y>=H){this._y=H;if(!isNaN(F)&&this._m>F){this._m=F}}for(var J=0;J<D.numberOfMonths;J++){G+='<div class="pika-lendar">'+r(this,J,this.calendars[J].year,this.calendars[J].month,this.calendars[0].year)+this.render(this.calendars[J].year,this.calendars[J].month)+"</div>"}this.el.innerHTML=G;if(D.bound){if(D.field.type!=="hidden"){s(function(){D.trigger.focus()},1)}}if(typeof this._o.onDraw==="function"){var L=this;s(function(){L._o.onDraw.call(L)},0)}},adjustPosition:function(){if(this._o.container){return}var L=this._o.trigger,J=L,E=this.el.offsetWidth,M=this.el.offsetHeight,I=window.innerWidth||o.documentElement.clientWidth,H=window.innerHeight||o.documentElement.clientHeight,F=window.pageYOffset||o.body.scrollTop||o.documentElement.scrollTop,G,K,D;if(typeof L.getBoundingClientRect==="function"){D=L.getBoundingClientRect();G=D.left+window.pageXOffset;K=D.bottom+window.pageYOffset}else{G=J.offsetLeft;K=J.offsetTop+J.offsetHeight;while((J=J.offsetParent)){G+=J.offsetLeft;K+=J.offsetTop}}if((this._o.reposition&&G+E>I)||(this._o.position.indexOf("right")>-1&&G-E+L.offsetWidth>0)){G=G-E+L.offsetWidth}if((this._o.reposition&&K+M>H+F)||(this._o.position.indexOf("top")>-1&&K-M-L.offsetHeight>0)){K=K-M-L.offsetHeight}this.el.style.cssText=["position: absolute","left: "+G+"px","top: "+K+"px"].join(";")},render:function(N,M){var E=this._o,H=new Date(),R=c(N,M),P=new Date(N,M,1).getDay(),K=[],T=[];y(H);if(E.firstDay>0){P-=E.firstDay;if(P<0){P+=7}}var S=R+P,F=S;while(F>7){F-=7}S+=7-F;for(var J=0,D=0;J<S;J++){var O=new Date(N,M,1+(J-P)),G=A(this._d)?p(O,this._d):false,L=p(O,H),I=J<P||J>=(R+P),Q=(E.minDate&&O<E.minDate)||(E.maxDate&&O>E.maxDate)||(E.disableWeekends&&n(O))||(E.disableDayFn&&E.disableDayFn(O));T.push(t(1+(J-P),M,N,G,L,Q,I));D++;if(D===7){if(E.showWeekNumber){T.unshift(f(J-P,M,N))}K.push(e(T,E.isRTL));T=[];D=0}}return m(E,K)},isVisible:function(){return this._v},show:function(){if(!this._v){l(this.el,"is-hidden");this._v=true;this.draw();if(this._o.bound){q(o,"click",this._onClick);this.adjustPosition()}if(typeof this._o.onOpen==="function"){this._o.onOpen.call(this)}}},hide:function(){var D=this._v;if(D!==false){if(this._o.bound){u(o,"click",this._onClick)}this.el.style.cssText="";k(this.el,"is-hidden");this._v=false;if(D!==undefined&&D!==false&&typeof this._o.onClose==="function"){this._o.onClose.call(this)}}},destroy:function(){this.hide();u(this.el,"mousedown",this._onMouseDown,true);u(this.el,"change",this._onChange);if(this._o.field){u(this._o.field,"change",this._onInputChange);if(this._o.bound){u(this._o.trigger,"click",this._onInputClick);u(this._o.trigger,"focus",this._onInputFocus);u(this._o.trigger,"blur",this._onInputBlur)}}if(this.el.parentNode){this.el.parentNode.removeChild(this.el)}}};return Pikaday}));